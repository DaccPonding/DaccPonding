<!DOCTYPE html>

<head>
  <title>
    Docker和yaml &middot; 苏蝉
  </title>
  
  <meta name="viewport"  content="width=device-width, initial-scale=1.0, maximum-scale=1"  />
  
  <meta http-equiv="X-UA-Compatible"  content="IE=edge"  />
  
  <meta http-equiv="content-type"  content="text/html; charset=utf-8"  />
  
  <meta name="google-site-verification"  content="YIKi1rBnyUaS-DMYiluseI5kZzTwjCkTFmKkSkMZDJk"  />
  
  <meta name="baidu-site-verification"  content="bEFDJ1LvXb"  />
  
  <meta name="yandex-verification"  content="52253e02830b443c"  />
  
  <link rel="profile"  href="//gmpg.org/xfn/11"  />
  
  <link rel="alternate"  href="/atom.xml"  title="RSS"  type="application/rss+xml"  />
  
  <link rel="apple-touch-icon-precomposed"  href="https://avatars1.githubusercontent.com/u/49705580?s=460&v=4"  />
  
  <link rel="shortcut icon"  href="https://avatars1.githubusercontent.com/u/49705580?s=460&v=4"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/wu-kan/wu-kan.github.io/public/css/poole.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/wu-kan/wu-kan.github.io/public/css/syntax.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/gh/wu-kan/wu-kan.github.io/public/css/lanyon.css"  />
  
  <link rel="stylesheet"  href="/public/css/wu-kan.css"  />
  
  <link rel="stylesheet"  href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.css"  />
  
</head>

<body
  class="theme-base-0d layout-reverse sidebar-overlay">
  
  <script  src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js" >
  </script>
  
  <script  src="//cdn.jsdelivr.net/npm/ribbon.js/dist/ribbon.min.js" >
  </script>
  
  <script  src="//cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget/autoload.js" >
  </script>
  
  <script  src="/public/js/prism.js" >
  </script>
  
  <script  src="/public/js/mermaid.js"  js="//cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"  stylesheet="//cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.css"  markdown_expand="true" >
  </script>
  
  <script  src="/public/js/katex.js"  js="//cdn.jsdelivr.net/npm/katex/dist/katex.min.js"  auto_render="//cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js"  stylesheet="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css"  delimiters="true" >
  </script>
  
  <script  src="/public/js/baidu_push.js" >
  </script>
  
  <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
  <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" />
  <!-- Toggleable sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-item">
      
      <div class="ih-item circle effect right_to_left">
        <a class="blog-button" title="和泉正宗">
          <img class="img" src="https://avatars1.githubusercontent.com/u/49705580?s=460&v=4" alt="img" />
          <small class="info info-back">
            <br>大奸大恶<br>热爱coding<br>开发者
          </small>
        </a>
      </div>
      
      
      <div class="sidebar-social">
        
        <a href="/atom.xml" title="rss">
          <i class="fas fa-rss fa-fw"></i>
        </a>
        
        <a href="mailto:1062677159@qq.com" title="1062677159@qq.com">
          <i class="fas fa-envelope fa-fw"></i>
        </a>
        
        <a href="" title="1062677159">
          <i class="fab fa-qq fa-fw"></i>
        </a>
        
        <a href="//github.com/DaccPonding" title="github">
          <i class="fab fa-github fa-fw"></i>
        </a>
        
      </div>
    </div>
    <nav class="sidebar-nav">
      
      <a class="sidebar-nav-item" href="/">
        <i class="fas fa-home fa-fw"></i> 首页
      </a>
      
      <a class="sidebar-nav-item" href="/about">
        <i class="fab fa-readme fa-fw"></i> 关于
      </a>
      
      <a class="sidebar-nav-item" href="/comments">
        <i class="fas fa-comments fa-fw"></i> 留言
      </a>
      
      <a class="sidebar-nav-item" href="/tags">
        <i class="fas fa-tags fa-fw"></i> 标签
      </a>
      
      <a class="sidebar-nav-item" href="/archive">
        <i class="fas fa-archive fa-fw"></i> 归档
      </a>
      
    </nav>
    <div class="sidebar-item">
      
      
      
      
      
      
    </div>
  </div>
  <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
  <div class="wrap">
    <h1 class="masthead masthead-title">
      <div class="container">
        Docker和yaml
        <a href="/">
          <small>苏蝉</small>
        </a>
      </div>
    </h1>
    <div class="container content">
      <div class="post">
  
  <small class="post-date">
    
    <i class="fas fa-calendar-day"></i>
    09 Sep 2019
    
    
    
    
    
    <i class="fas fa-tag"></i>
    Docker
    
    </br>
    <i class="fab fa-creative-commons"></i> <a rel="license" href="//creativecommons.org/licenses/by-sa/4.0/deed.zh">BY-SA 4.0</a>（除特别声明或转载文章外）
  </small>
  
  
  <div class="post-content">
    <h1 id="9月9"><strong>9月9</strong></h1>

<h4 id="docker"><strong>Docker</strong></h4>

<h6 id="docker架构"><strong>Docker架构</strong></h6>

<p>使用C/S架构。通过远程API管理和创建Docker容器。</p>

<p>Docker容器通过Docker镜像创建。</p>

<p>两者关系相当于对象与类。</p>

<table>
  <thead>
    <tr>
      <th>Docker 镜像(Images)</th>
      <th>Docker 镜像是用于创建 Docker 容器的模板。</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Docker 容器(Container)</td>
      <td>容器是独立运行的一个或一组应用。</td>
    </tr>
    <tr>
      <td>Docker 客户端(Client)</td>
      <td>Docker 客户端通过命令行或者其他工具使用 Docker API (https://docs.docker.com/reference/api/docker_remote_api) 与 Docker 的守护进程通信。</td>
    </tr>
    <tr>
      <td>Docker 主机(Host)</td>
      <td>一个物理或者虚拟的机器用于执行 Docker 守护进程和容器。</td>
    </tr>
    <tr>
      <td>Docker 仓库(Registry)</td>
      <td>Docker 仓库用来保存镜像，可以理解为代码控制中的代码仓库。Docker Hub(<a href="https://hub.docker.com/">https://hub.docker.com</a>) 提供了庞大的镜像集合供使用。</td>
    </tr>
    <tr>
      <td>Docker Machine</td>
      <td>Docker Machine是一个简化Docker安装的命令行工具，通过一个简单的命令行即可在相应的平台上安装Docker，比如VirtualBox、 Digital Ocean、Microsoft Azure。</td>
    </tr>
  </tbody>
</table>

<p>Docker是 Docker.Inc 公司开源的一个基于 LXC技术之上构建的<strong>Container容器引擎</strong>，基于Go语言并遵从Apache2.0协议开源。</p>

<p><strong>LXC</strong>全拼是linux containners，linux容器，是一种虚拟化技术。Docker就是linux容器的一种封装提供简单易用的容器使用接口。</p>

<h6 id="docker能干嘛"><strong>Docker能干嘛</strong></h6>

<p>开发者可以搭建他们的应用仅仅一次，就能保证让这个应用保持一致的跑在任何地方。运营人员可以将他们的服务器配置一遍，就能跑任何应用。</p>

<ul>
  <li>提供一次性环境。本地测试他人软件，持续集成的时候提供单元测试和构建的环境。</li>
  <li>提供弹性的云服务。docker容器可以随开随关，很适合动态扩容和缩容。</li>
  <li>组件微服务架构。通过多个容器，一台机器跑多个服务。</li>
</ul>

<h6 id="docker常用命令"><strong>Docker常用命令</strong></h6>

<ul>
  <li><code class="language-plaintext highlighter-rouge">docker images</code> 显示本地已有镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker info</code> 显示docker系统信息；</li>
  <li><code class="language-plaintext highlighter-rouge">docker commit -m -a</code> 提交更新后的镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker build</code> 通过Dockerfile来构建镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker import</code> 本地导入镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker search</code> 查找仓库中镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker push</code> 将镜像推送到仓库；
    <ul>
      <li><code class="language-plaintext highlighter-rouge">docker push 账号名/镜像名:tag</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">docker pull</code> 将仓库中镜像下载到本地；</li>
  <li><code class="language-plaintext highlighter-rouge">docker save -o mysql_5.6.tar mysql:5.6</code> 导出镜像到本地；</li>
  <li><code class="language-plaintext highlighter-rouge">docker load &amp;lt; mysql_5.6.tar</code> 载入镜像；</li>
  <li><code class="language-plaintext highlighter-rouge">docker rmi</code> 移除镜像；
    <ul>
      <li><code class="language-plaintext highlighter-rouge">docker rmi imageID</code> 移除该镜像</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">docker attach</code> 运行中容器的stdin，进行命令执行的动作；</li>
  <li><code class="language-plaintext highlighter-rouge">docker history Images</code> 显示镜像的历史；</li>
  <li><code class="language-plaintext highlighter-rouge">docker rm</code> 删除结束了的container
    <ul>
      <li><code class="language-plaintext highlighter-rouge">dokcer rm containerID</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">docker cp</code> 在host和container之间拷贝文件</li>
  <li><code class="language-plaintext highlighter-rouge">docker ps</code> 列出正在执行containner
    <ul>
      <li><code class="language-plaintext highlighter-rouge">docker ps -a</code> 列出所有执行过的containner</li>
      <li><code class="language-plaintext highlighter-rouge">docker ps -l</code> 列出最近一次的container</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">docker run</code> 运行container</li>
  <li><code class="language-plaintext highlighter-rouge">docker tag</code> 给镜像打tag(标签)
    <ul>
      <li>docker tag 镜像名:tag(不填默认为latest) 镜像名:tag</li>
    </ul>
  </li>
</ul>

<h6 id="docker-compose安装卸载"><strong>docker-compose安装卸载</strong></h6>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo curl -L https://github.com/docker/compose/releases/download/1.17.1/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
</code></pre></div></div>

<p>卸载</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo rm /usr/local/bin/docker-compose
</code></pre></div></div>

<h6 id="yaml语言"><strong>YAML语言</strong></h6>

<p>通用的数据串行化格式。专门用于写配置的语言，<strong>非常简洁强大</strong>，远比<strong>JSON方便</strong>。</p>

<p>语法规则：</p>

<ul>
  <li>大小写敏感</li>
  <li>缩进表示层级关系</li>
  <li>缩进不允许使用tab，只允许空格</li>
  <li>缩进的空格数目不重要，只要相同层级元素左侧对齐即可。</li>
</ul>

<p>#表示注释，该字符一直到行尾，都会被解析器忽略。</p>

<p>YAML支持的数据结构：</p>

<ul>
  <li>对象，键值对的集合，又称映射，哈希，字典</li>
  <li>数组,按次序排列的一组值，又称为序列，列表</li>
  <li>纯量，单个的不可再分的值。</li>
</ul>

<h6 id="对象"><strong>对象</strong></h6>

<p>对象的一组键值对，使用冒号结构表示。</p>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">animal</span><span class="p">:</span> <span class="nx">pets</span>
</code></pre></div>  </div>
</blockquote>

<p>转为 JavaScript 如下。</p>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">animal</span><span class="p">:</span> <span class="dl">'</span><span class="s1">pets</span><span class="dl">'</span> <span class="p">}</span>
</code></pre></div>  </div>
</blockquote>

<p>Yaml 也允许另一种写法，将所有键值对写成一个行内对象。</p>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">hash</span><span class="p">:</span> <span class="p">{</span> <span class="nl">name</span><span class="p">:</span> <span class="nx">Steve</span><span class="p">,</span> <span class="nx">foo</span><span class="p">:</span> <span class="nx">bar</span> <span class="p">}</span> 
</code></pre></div>  </div>
</blockquote>

<p>转为 JavaScript 如下。</p>

<blockquote>
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">hash</span><span class="p">:</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Steve</span><span class="dl">'</span><span class="p">,</span> <span class="na">foo</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bar</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span>
</code></pre></div>  </div>
</blockquote>

<h6 id="数组"><strong>数组</strong></h6>

<p>一组连词线开头的行，构成一个数组。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> - Cat
 - Dog
 - Goldfish
</code></pre></div></div>

<p>转成js为</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['Cat','Dog','Goldfish']
</code></pre></div></div>

<p>子成员是一个数组，可以在该项下面缩进一个空格。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 
  - Cat
  - Dog
  - Goldfish
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[['Cat','Dog','Goldfish']]
</code></pre></div></div>

<p>数组也可以用行内表示法</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>animal:[Cat,Dog]
{animal:['Cat','Dog']}
</code></pre></div></div>

<h6 id="复合结构"><strong>复合结构</strong></h6>

<p>对象与数组结合使用构成混合结构</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>languages:
 - Ruby
 - Perl
 - Python 
websites:
 YAML: yaml.org 
 Ruby: ruby-lang.org 
 Python: python.org 
 Perl: use.perl.org 
 
 //js
 {
 	languages:['Ruby','Perl','Python'],
 	websites:{
 		 YAML: 'yaml.org',
 		 Ruby: 'ruby-lang.org',
 		 Python: 'python.org',
 		 Perl: 'use.perl.org',
 	}
 }
</code></pre></div></div>

  </div>
  
  
  <div class="reward">
    <button id="rewardButton" disable="enable"
      onclick="var qr = document.getElementById('rewardQRs'); qr.style.display = (qr.style.display === 'block') ? 'none' : 'block';">
      如果我的博客帮助到你，可以请我喝一杯咖啡~
    </button>
    <div id="rewardQRs">
      <table>
        <tr>
          
          <td id="wechat" class="reward_qr">
            <img id="wechat_qr" src="/public/image/wechatpay.jpg" alt="和泉正宗wechat">
          </td>
          
          <td id="alipay" class="reward_qr">
            <img id="alipay_qr" src="/public/image/alipay.jpg" alt="和泉正宗alipay">
          </td>
          
        </tr>
      </table>
    </div>
  </div>
  
</div>


<script src="/public/js/valine.js"></script>


    </div>
  </div>
  <label for="sidebar-checkbox" class="sidebar-toggle fas fa-bars"></label>
</body>

</html>
